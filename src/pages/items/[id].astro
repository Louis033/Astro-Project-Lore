---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const items = await getCollection("items");
  return items.map((it) => ({
    params: { id: it.slug },
    props: { item: it },
  }));
}

const { item } = Astro.props;
const { Content } = await item.render();

const base = import.meta.env.BASE_URL;
const withBase = (path) => `${base}${path}`;
---

<BaseLayout title={item.data.name}>
  <a class="small" href={withBase("items")}>‚Üê Kembali</a>

  <div class="article">
    <h1>{item.data.name}</h1>
    {item.data.type && <p><i>{item.data.type}</i></p>}

    <Content />

    <aside class="panel">
      <h3>Info</h3>
      <table>
        <tbody>
          <tr><td>Tipe</td><td>{item.data.type ?? "-"}</td></tr>
          <tr><td>Rarity</td><td>{item.data.rarity ?? "-"}</td></tr>
        </tbody>
      </table>
    </aside>
  </div>
</BaseLayout>

<style>
  .small{ opacity:.7; text-decoration:none; }
  .article{ max-width: 760px; }
  .panel{
    margin-top: 24px;
    padding: 14px 16px;
    border: 1px solid #eee;
    border-radius: 12px;
  }
  table td{ padding: 6px 10px 6px 0; vertical-align: top; }
</style>
